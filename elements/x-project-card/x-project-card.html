<link rel="import" href="/bower_components/polymer/polymer.html">
<link rel="import" href="/bower_components/font-roboto/roboto.html">
<link rel="import" href="/bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="/bower_components/core-icons/core-icons.html">

<polymer-element name="x-project-card" attributes="project">
  <template>
    <style>
      :host {
        display: block;
        position: relative;
        width: 100%;
      }
      .card {
        padding: 10px;
        overflow: visible;
        display: flex;
      }
      .card-inner {
        flex: 1;
        background-color: #fff;
        padding: 10px;
        position: relative;
        box-shadow: 0px 2px 5px rgba(0,0,0, .3);
      }
      paper-icon-button {
        position: absolute;
        top: 3px;
        right: 3px;
        fill: #e0e0e0;
      }
      :host([favorite]) paper-icon-button {
        fill: #da4336;
      }
    </style>
    <div class="card">
      <div class="card-inner">
        <h1 class="project-title">{{ project.value.Name }}</h1>
        <h2>{{ project.value.Account.Name }}</h2>
        <h3>{{ project.value.Futu_Team__c }} / {{ project.value.Owner.Name }}</h3>
        <ul>
          <li>Amount: {{ project.value.Amount }}</li>
          <li>CloseDate: {{ project.value.CloseDate }}</li>
          <li>Probability: {{ project.value.Probability }}</li>
          <li>StageName: {{ project.value.StageName }}</li>
          <li>IsClosed: {{ project.value.IsClosed }}</li>
          <li>IsWon: {{ project.value.IsWon }}</li>
          <li>Work Start Date: {{ project.value.Budgeted_Work_Start_Date__c }}</li>
          <li>Work End Date: {{ project.value.Budgeted_Work_End_Date__c }}</li>
        </ul>
        <div class="project-description">{{ project.value.Description }}</div>

        <paper-icon-button icon="favorite" on-tap="{{ favoriteTapped }}"></paper-icon-button>
      </div>
    </div>
  </template>
  <script>
    Polymer('x-project-card', {
      project: {},
      publish: {
        favorite: {
          value: false,
          reflect: true
        }
      },
      favoriteTapped: function(event, detail, sender) {
        this.project.favorite = this.favorite = !this.favorite;
        this.fire('favorite-tap');
      }
    });
  </script>
</polymer-element>